



/* ControlTag Loader for Creative Media Works Pte Ltd b1365729-3683-487d-b7e5-6ba0649b92f6 */
(function(w, cs) {
  
  if (/Twitter for iPhone/.test(w.navigator.userAgent || '')) {
    return;
  }

  var debugging = /kxdebug/.test(w.location);
  var log = function() {
    
    debugging && w.console && w.console.log([].slice.call(arguments).join(' '));
  };

  var load = function(url, callback) {
    log('Loading script from:', url);
    var node = w.document.createElement('script');
    node.async = true;  
    node.src = url;

    
    node.onload = node.onreadystatechange = function () {
      var state = node.readyState;
      if (!callback.done && (!state || /loaded|complete/.test(state))) {
        log('Script loaded from:', url);
        callback.done = true;  
        callback();
      }
    };

    
    var sibling = w.document.getElementsByTagName('script')[0];
    sibling.parentNode.insertBefore(node, sibling);
  };

  var config = {"app":{"name":"krux-scala-config-webservice","version":"3.42.1","schema_version":3},"confid":"thxtgja3i","context_terms":[],"publisher":{"name":"Creative Media Works Pte Ltd","active":true,"uuid":"b1365729-3683-487d-b7e5-6ba0649b92f6","version_bucket":"stable","id":3856},"params":{"first_party_dmp_managed":true,"link_header_bidder":false,"site_level_supertag_config":"site","recommend":false,"control_tag_pixel_throttle":100,"fingerprint":false,"optout_button_optout_text":"Browser Opt Out","user_data_timing":"load","consent_active":true,"use_central_usermatch":true,"store_realtime_segments":false,"tag_source":false,"link_hb_start_event":"ready","optout_button_optin_text":"Browser Opt In","first_party_uid":true,"link_hb_timeout":2000,"link_hb_adserver_subordinate":true,"optimize_realtime_segments":false,"link_hb_adserver":"dfp","target_fingerprint":false,"context_terms":true,"optout_button_id":"kx-optout-button","dfp_premium":true,"control_tag_namespace":"creativemediaworkspteltd"},"prioritized_segments":[],"realtime_segments":[{"id":"u1yi5lgr5","test":["and",["and",["or",["intersects","$user_attr_kly_gender",["male","men"]]]]]},{"id":"ugwd6k16p","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["aliansi nissan mitsubishi","all new daihatsu terios 2018","all new mitsubishi pajero sport 2016","all new toyota camry","all new toyota rush 2018","all new toyota vios","all-new toyota yaris","artikel mobil daihatsu","artikel mobil toyota","astra daihatsu","astra daihatsu motor","avanza","avanza 2019","avanza 2019 terbaru","avanza baru","avanza facelift","avanza terbaru","avanza veloz","avanza-xenia","daihatsu","daihatsu ayla","daihatsu ayla turbo","daihatsu calya","daihatsu copen","daihatsu gran max","daihatsu grand new xenia","daihatsu hy-fun","daihatsu hybrid","daihatsu luxio","daihatsu rocky","daihatsu sigra","daihatsu sirion","daihatsu stage","daihatsu tanto","daihatsu terios","daihatsu thor","daihatsu xenia","daihatsu xenia 2019","daihatsu xenia hybrid","daihatsu xenia terbaru","grand new avanza","harga daihatsu terios","harga daihatsu xenia","harga mitsubishi xpander","harga mobil","harga mobil baru","harga mobil bekas","harga mobil honda","harga mobil honda brio","harga mobil honda mobilio","harga mobil murah","harga mobil suzuki ignis","harga toyota","harga toyota avanza","harga toyota kijang","harga toyota yaris","honda mobil","honda mobilio","honda mobilio 2017","honda mobilio 2019","honda mobilio rs","kredit mobil","mitsubihsi expander","mitsubishi","mitsubishi crossover","mitsubishi delica","mitsubishi eclips cross","mitsubishi eclipse cross","mitsubishi fuso","mitsubishi kuda","mitsubishi lancer","mitsubishi lancer evolution","mitsubishi mirage","mitsubishi outlander","mitsubishi outlander phev","mitsubishi outlander sport","mitsubishi pajero","mitsubishi pajero sport","mitsubishi strada triton","mitsubishi triton","mitsubishi triton absolute","mitsubishi xpander","mitsubishi xpander bermasalah","mitsubishi xpander cross","mitsubishi xpander crossover","mitsubishi xpander edisi terbatas","mitsubishi xpander naik harga","mitsubishi xpander tons of happiness","mobil baru","mobil baru 2019","mobil bekas","mobil bmw","mobil daihatsu","mobil hatchback","mobil hemat energi","mobil honda","mobil hybrid","mobil hybrid toyota","mobil land cruiser","mobil lcgc","mobil mitsubishi","mobil mpv","mobil murah daihatsu","mobil pajero","mobil premium","mobil suv","mobil suzuki","mobil toyota","mobil yamaha","mobilio","mobilio 2019","mobilio rs","mobilio terbaru","new avanza","new honda mobilio","new mitsubishi triton","new toyota avanza veloz","pajero","pajero sport","toyota agya","toyota all new kijang innova","toyota alphard","toyota alphard hybrid","toyota avanza","toyota avanza 2019","toyota avanza baru","toyota avanza terbaru","toyota avanza transmover","toyota avanza veloz luxury","toyota aygo","toyota c hr","toyota c-hr","toyota c-hr hybrid","toyota calya","toyota camry","toyota camry 2019","toyota camry hybrid","toyota corolla","toyota corolla altis","toyota crown","toyota crown 2.5 hv g-executive","toyota etios","toyota etios liva","toyota etios valco","toyota fortuner","toyota glanza","toyota gr supra","toyota grand new avanza","toyota granvia","toyota harrier","toyota hi-ace","toyota hiace","toyota hiace luxury","toyota hilux","toyota hybrid","toyota innova","toyota innova crysta","toyota innova diesel","toyota kijang","toyota kijang innova","toyota land cruiser","toyota limo","toyota majesty","toyota mr2","toyota prius","toyota prius phev","toyota raize","toyota rav4","toyota rise","toyota rush","toyota sienna","toyota sienta","toyota starlet","toyota supra","toyota supra 2020","toyota tj cruiser","toyota transmover","toyota trueno","toyota vellfire","toyota veloz","toyota vios","toyota voxy","toyota yaris","toyota-daihatsu","xenia","xenia 2019","xpander","xpander cross","xpander crossover","xpander ultimate"]],["intersects","$event_M361oCpv_attr_cat",["automotive-event","car-automotive","car-daihatsu","car-mitsubishi","car-premium","car-suzuki","car-toyota"]],["intersects","$event_M361oCpv_attr_media",["article-mobkas-bos-auto","form-innova-175-juta","form-mega-diskon-sevaid","form-mobkas-bos-auto","form-oyota-fortuner-rp-435-juta","form-pajero-sport-rp-270-juta","form-toyota-innova-"]]]]]},{"id":"ui8sgng3n","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["badan langsing","cara langsing usai melahirkan","cara melangsingkan badan","cepat langsing","diet melangsingkan tubuh","hamil tetap langsing","langsing","langsing alami","minuman pelangsing","obat pelangsing","pelangsing","perut langsing","resep minuman pelangsing","teh pelangsing","tips langsing","tips langsing saat puasa","tips langsing setelah lebaran","tips perut langsing","tips puasa langsing","trik langsing","tubuh langsing"]],["intersects","$event_M361oCpv_attr_media",["article-emc-hospital","article-emc-hospital'","form-emc-hospital","form-shinzen"]],["intersects","$event_M361oCpv_attr_cat",["beauty-treatment","health-drugs","health-hospital","health-wellness"]]]]]},{"id":"um5qz0ugi","test":["and",["and",["or",["contains","$page_attr_kly_tag:|",["kuliner"]],["intersects","$event_M361oCpv_attr_cat",["beverage","beverageuct","culinary","culinaryuct"]]]]]},{"id":"ugztpxerk","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["desain interior","desainer interior","properti"]],["intersects","$event_M361oCpv_attr_cat",["property","property-apartment","property-houses"]],["intersects","$event_M361oCpv_attr_media",["article-shitaro-design","article-shitaro-design'","form-shitaro-design"]]]]]},{"id":"uhjby7txv","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["artikel iphone 11","electronic mobile","iphone 11"]],["intersects","$event_M361oCpv_attr_cat",["electronic-mobile","smartphone"]],["intersects","$event_M361oCpv_attr_media",["article-po-iphone-11","article-po-iphone-11'","form-iphone-11-","form-po-iphone","form-po-iphone-"]]]]]},{"id":"ugzs3di07","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["cara menghilangkan jerawat","perawatan wajah","stretch mark","treatment"]],["intersects","$event_M361oCpv_attr_media",["article-emc-hospital","article-emc-hospital'","form-emc","form-emc-hospital"]],["intersects","$event_M361oCpv_attr_cat",["Beauty","Event Beauty","beauty","beauty-content","beauty-event","beauty-plastic-surgery","beauty-treatment"]]]]]},{"id":"u1yk7urq5","test":["and",["and",["or",["intersects","$user_attr_kly_age",["11","12","13","14","15","16","17"]],["intersects","$page_attr_kly_audience:|",["animation-movies","animation-tv","beauty","beauty-events","body-care","childrens-tv","console-games","family-and-children-movies","fantasy-movies","gaming","hijab-content","hollywood-content","horror-movies","make-up","movies","music-content","music-tv","musical-events","pc-games","romance-movies","science-fiction-movies","special-interest-tv","television"]]]]]},{"id":"ugrniipyy","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["jarvis","sepeda listrik","viar q1"]],["intersects","$event_M361oCpv_attr_cat",["automotive-event","bike-automotive","bike-electric"]],["intersects","$event_M361oCpv_attr_media",["article-jarvis","article-jarvis'","form-jarvis"]]]]]},{"id":"uje33db51","test":["and",["and",["or",["intersects","$page_attr_kly_tag:|",["artikel shinzen underwear","badan langsing","cara langsing usai melahirkan","cara melangsingkan badan","cepat langsing","diet melangsingkan tubuh","hamil tetap langsing","langsing","langsing alami","minuman pelangsing","obat pelangsing","pelangsing","perut langsing","resep minuman pelangsing","teh pelangsing","tips langsing","tips langsing saat puasa","tips langsing setelah lebaran","tips perut langsing","tips puasa langsing","trik langsing","tubuh langsing"]],["intersects","$event_M361oCpv_attr_media",["article-shinzen","form-dream-day-2019","form-fimela-fest-2019","form-fimelafest-2019","form-fimelafesttest","form-fimelahood-2019","form-nudiejeans","form-shinzen"]],["intersects","$event_M361oCpv_attr_cat",["fashion","fashion-event","fashion-event-uct","fashion-hijab","fashion-wanitauct","fashion-women","hijab","women","women-event","women-fashion-product-uct","womenuct"]]]]]},{"id":"u1yi0395s","test":["and",["and",["or",["intersects","$user_attr_kly_gender",["female","perempuan","wanita","women"]]]]]},{"id":"uijcgcvfb","test":["and",["and",["or",["intersects","$event_M361oCpv_attr_cat",["fashion-men","fashion-priauct","men-fashion-product","men-fashion-product-uct","men-fashion-productuct"]],["intersects","$event_M361oCpv_attr_media",["article-air-jordan-1-retro-high-OG-NRG","article-air-jordan-1-retro-high-OG-NRG'","form-air-jordan-1-retro-high-og-nrg"]],["intersects","$page_attr_kly_tag:|",["artikel arres underwear"]]]]]},{"id":"ulf1y0kcx","test":["and",["and",["or",["intersects","$event_M361oCpv_attr_cat",["culinary","culinaryuct","fmcg-frozen-food","fmcg-snack","food","fooduct"]],["intersects","$event_M361oCpv_attr_media",["article-sambalauku","form-sambalauku"]]]]]}],"services":{"userdata":"//cdn.krxd.net/userdata/get","contentConnector":"https://connector.krxd.net/content_connector","stats":"//apiservices.krxd.net/stats","optout":"//cdn.krxd.net/userdata/optout/status","event":"//beacon.krxd.net/event.gif","set_optout":"https://consumer.krxd.net/consumer/optout","data":"//beacon.krxd.net/data.gif","link_hb_stats":"//beacon.krxd.net/link_bidder_stats.gif","userData":"//cdn.krxd.net/userdata/get","link_hb_mas":"https://link.krxd.net/hb","config":"//cdn.krxd.net/controltag/{{ confid }}.js","social":"//beacon.krxd.net/social.gif","addSegment":"//cdn.krxd.net/userdata/add","pixel":"//beacon.krxd.net/pixel.gif","um":"https://usermatch.krxd.net/um/v2","controltag":"//cdn.krxd.net/ctjs/controltag.js.{hash}","loopback":"https://consumer.krxd.net/consumer/tmp_cookie","remove":"https://consumer.krxd.net/consumer/remove/b1365729-3683-487d-b7e5-6ba0649b92f6","click":"https://apiservices.krxd.net/click_tracker/track","stats_export":"//beacon.krxd.net/controltag_stats.gif","userdataApi":"//cdn.krxd.net/userdata/v1/segments/get","cookie":"//beacon.krxd.net/cookie2json","proxy":"//cdn.krxd.net/partnerjs/xdi","consent_get":"https://consumer.krxd.net/consent/get/b1365729-3683-487d-b7e5-6ba0649b92f6","consent_set":"https://consumer.krxd.net/consent/set/b1365729-3683-487d-b7e5-6ba0649b92f6","is_optout":"https://beacon.krxd.net/optout_check","impression":"//beacon.krxd.net/ad_impression.gif","transaction":"//beacon.krxd.net/transaction.gif","log":"//jslog.krxd.net/jslog.gif","portability":"https://consumer.krxd.net/consumer/portability/b1365729-3683-487d-b7e5-6ba0649b92f6","set_optin":"https://consumer.krxd.net/consumer/optin","usermatch":"//beacon.krxd.net/usermatch.gif"},"experiments":[],"site":{"name":"kly.id","cap":255,"id":1668965,"organization_id":3856,"uid":"thxtgja3i"},"tags":[{"id":37822,"name":"DTC - Standard (Global)","content":"<script>\n(function() {\n    /* Standard but configurable DTC */\n    var comDomain, domain, level, libUtil, pathLevel, prefix, toSet;\n    libUtil = Krux('require:util.library-tag');\n    toSet = {};\n    level = 1;\n    while (level <= Number('5')) {\n        pathLevel = Krux('scrape.url_path', level);\n        if (pathLevel) {\n            if ('false' === 'true') {\n                pathLevel = (\"\" + pathLevel).replace(\n                    /\\.(?:html?|php[0-9]?|aspx?|cfg|py)$/i, '');\n            }\n            toSet[\"page_attr_url_path_\" + level] = pathLevel;\n        }\n        level++;\n    }\n    toSet['page_attr_meta_keywords'] = Krux('scrape.meta_name', 'keywords');\n    prefix = libUtil.resolvePrefix('none', 'undefined',\n        'undefined');\n    toSet = Krux('prefix:attr', toSet, prefix);\n    domain = Krux('get', 'domain');\n    comDomain = domain.match(/\\.([^\\.]+\\.com)$/);\n    if (comDomain) {\n        domain = comDomain[1];\n    }\n    toSet['page_attr_domain'] = domain;\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"asap","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38904,"name":"DTC - Standard (KLY)","content":"<script>\n(function() {\n    /* Standard but configurable DTC */\n    var comDomain, domain, level, libUtil, pathLevel, prefix, toSet;\n    libUtil = Krux('require:util.library-tag');\n    toSet = {};\n    level = 1;\n    while (level <= Number('3')) {\n        pathLevel = Krux('scrape.url_path', level);\n        if (pathLevel) {\n            if ('false' === 'true') {\n                pathLevel = (\"\" + pathLevel).replace(\n                    /\\.(?:html?|php[0-9]?|aspx?|cfg|py)$/i, '');\n            }\n            toSet[\"page_attr_url_path_\" + level] = pathLevel;\n        }\n        level++;\n    }\n    toSet['page_attr_meta_keywords'] = Krux('scrape.meta_name', 'keywords');\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        'undefined');\n    toSet = Krux('prefix:attr', toSet, prefix);\n    domain = Krux('get', 'domain');\n    comDomain = domain.match(/\\.([^\\.]+\\.com)$/);\n    if (comDomain) {\n        domain = comDomain[1];\n    }\n    toSet['page_attr_domain'] = domain;\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onready","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":37823,"name":"DTC - UTM","content":"<script>\n(function(){\n\n\tvar params = Krux('require:util').urlParams();\n\t\n\tKrux ('set', { \n\t'page_attr_utm_source': params.utm_source,\n\t'page_attr_utm_medium': params.utm_medium,\n\t'page_attr_utm_campaign': params.utm_campaign,\n\t'page_attr_utm_content': params.utm_content,\n\t'page_attr_utm_term': params.utm_term \n\t});\n\t\n})();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38439,"name":"DTC - DataLayer (kmklabs.gtm)","content":"<script>\n(function() {\n    /* Selective Attribute DataLayer Library Tag */\n    var _, allAttr, allowedList, attr, attributes, dataLayerIngester, dataObj,\n        isAllowed, keepCase, libUtil, omitKeys, pageAttr, prefix, toSet, trim,\n        userAttr, util, value,\n        hasProp = {}.hasOwnProperty;\n    _ = Krux('require:underscore');\n    util = Krux('require:util');\n    libUtil = Krux('require:util.library-tag');\n    dataLayerIngester = Krux('require:scrape').ingestDataLayer;\n\n    /* Safe copy of dataLayer object */\n    dataObj = Krux('scrape.javascript', 'kmklabs.gtm');\n\n    /* String trimming helper function */\n    trim = function(attr) {\n        return (\"\" + attr).replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /* Attribute configs */\n    pageAttr = _.map('articleId,Category,subCategory,subSubCategory,tag,type,audience'.split(','), trim);\n    userAttr = _.map('login_status,userId,userID,user_type'.split(','), trim);\n\n    /* Create a array of attributes striping any empty strings */\n    allAttr = _.without(pageAttr.concat(userAttr), '');\n\n    /* Configuration settings */\n    keepCase = 'false' === 'true';\n    omitKeys = 'authors.type'.split(',');\n\n    /* Resolve Prefix */\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        '');\n\n    /* Function to varify if attribute should be used */\n    isAllowed = function(value, whitelist) {\n        var i, len, str, x;\n        str = \"\" + value;\n        if (!((value != null) && str.length > 0)) {\n            return false;\n        }\n        for (i = 0, len = whitelist.length; i < len; i++) {\n            x = whitelist[i];\n            if (value.match(x) != null) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /* Get a full list of attributes usting the dataLayer tool */\n    attributes = dataLayerIngester(dataObj, {\n        omitKeys: libUtil.removeFalsyStrings(omitKeys.concat(libUtil.EXCLUDE_KEYS_CONFIG)),\n        omitValues: libUtil.EXCLUDE_VALUES_CONFIG,\n        caseSensitive: keepCase,\n        useFullPath: 'false' === 'true',\n        useLastValue: 'false' === 'true',\n        customDelimited: [/./],\n        altDelimiter: ',',\n        userKeys: _.map(userAttr, function(exp) {\n            return new RegExp(\"(^|\\\\.)\" + exp + \"$\");\n        }),\n        optimizeNames: true\n    });\n\n    /* Only set Attributes in the allowed list */\n    allowedList = _.map(allAttr, function(name) {\n        return new RegExp(\"(_attr_|_attr_\" + prefix + \"|\\\\.)\" + (keepCase ?\n            name : libUtil.normalizeAttrName(name, {\n                removeDot: false\n            })) + \"$\");\n    });\n    toSet = {};\n    for (attr in attributes) {\n        if (!hasProp.call(attributes, attr)) continue;\n        value = attributes[attr];\n        if (isAllowed(attr, allowedList)) {\n            toSet[attr] = value;\n        }\n    }\n    toSet = Krux('prefix:attr', toSet, prefix);\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38440,"name":"DTC - DataLayer (kmklabs)","content":"<script>\n(function() {\n    /* Selective Attribute DataLayer Library Tag */\n    var _, allAttr, allowedList, attr, attributes, dataLayerIngester, dataObj,\n        isAllowed, keepCase, libUtil, omitKeys, pageAttr, prefix, toSet, trim,\n        userAttr, util, value,\n        hasProp = {}.hasOwnProperty;\n    _ = Krux('require:underscore');\n    util = Krux('require:util');\n    libUtil = Krux('require:util.library-tag');\n    dataLayerIngester = Krux('require:scrape').ingestDataLayer;\n\n    /* Safe copy of dataLayer object */\n    dataObj = Krux('scrape.javascript', 'kmklabs');\n\n    /* String trimming helper function */\n    trim = function(attr) {\n        return (\"\" + attr).replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /* Attribute configs */\n    pageAttr = _.map('site,platform,isAdultContent'.split(','), trim);\n    userAttr = _.map('false'.split(','), trim);\n\n    /* Create a array of attributes striping any empty strings */\n    allAttr = _.without(pageAttr.concat(userAttr), '');\n\n    /* Configuration settings */\n    keepCase = 'false' === 'true';\n    omitKeys = 'false'.split(',');\n\n    /* Resolve Prefix */\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        '');\n\n    /* Function to varify if attribute should be used */\n    isAllowed = function(value, whitelist) {\n        var i, len, str, x;\n        str = \"\" + value;\n        if (!((value != null) && str.length > 0)) {\n            return false;\n        }\n        for (i = 0, len = whitelist.length; i < len; i++) {\n            x = whitelist[i];\n            if (value.match(x) != null) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /* Get a full list of attributes usting the dataLayer tool */\n    attributes = dataLayerIngester(dataObj, {\n        omitKeys: libUtil.removeFalsyStrings(omitKeys.concat(libUtil.EXCLUDE_KEYS_CONFIG)),\n        omitValues: libUtil.EXCLUDE_VALUES_CONFIG,\n        caseSensitive: keepCase,\n        useFullPath: 'false' === 'true',\n        useLastValue: 'false' === 'true',\n        customDelimited: [/./],\n        altDelimiter: ',',\n        userKeys: _.map(userAttr, function(exp) {\n            return new RegExp(\"(^|\\\\.)\" + exp + \"$\");\n        }),\n        optimizeNames: true\n    });\n\n    /* Only set Attributes in the allowed list */\n    allowedList = _.map(allAttr, function(name) {\n        return new RegExp(\"(_attr_|_attr_\" + prefix + \"|\\\\.)\" + (keepCase ?\n            name : libUtil.normalizeAttrName(name, {\n                removeDot: false\n            })) + \"$\");\n    });\n    toSet = {};\n    for (attr in attributes) {\n        if (!hasProp.call(attributes, attr)) continue;\n        value = attributes[attr];\n        if (isAllowed(attr, allowedList)) {\n            toSet[attr] = value;\n        }\n    }\n    toSet = Krux('prefix:attr', toSet, prefix);\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38441,"name":"DTC - DataLayer (kly.gtm)","content":"<script>\n(function() {\n    /* Selective Attribute DataLayer Library Tag */\n    var _, allAttr, allowedList, attr, attributes, dataLayerIngester, dataObj,\n        isAllowed, keepCase, libUtil, omitKeys, pageAttr, prefix, toSet, trim,\n        userAttr, util, value,\n        hasProp = {}.hasOwnProperty;\n    _ = Krux('require:underscore');\n    util = Krux('require:util');\n    libUtil = Krux('require:util.library-tag');\n    dataLayerIngester = Krux('require:scrape').ingestDataLayer;\n\n    /* Safe copy of dataLayer object */\n    dataObj = Krux('scrape.javascript', 'kly.gtm');\n\n    /* String trimming helper function */\n    trim = function(attr) {\n        return (\"\" + attr).replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /* Attribute configs */\n    pageAttr = _.map('articleId,Category,subCategory,subSubCategory,tag,type,audience'.split(','), trim);\n    userAttr = _.map('login_status,userId,userID,user_type,age,gender'.split(','), trim);\n\n    /* Create a array of attributes striping any empty strings */\n    allAttr = _.without(pageAttr.concat(userAttr), '');\n\n    /* Configuration settings */\n    keepCase = 'false' === 'true';\n    omitKeys = 'authors.type'.split(',');\n\n    /* Resolve Prefix */\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        '');\n\n    /* Function to varify if attribute should be used */\n    isAllowed = function(value, whitelist) {\n        var i, len, str, x;\n        str = \"\" + value;\n        if (!((value != null) && str.length > 0)) {\n            return false;\n        }\n        for (i = 0, len = whitelist.length; i < len; i++) {\n            x = whitelist[i];\n            if (value.match(x) != null) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /* Get a full list of attributes usting the dataLayer tool */\n    attributes = dataLayerIngester(dataObj, {\n        omitKeys: libUtil.removeFalsyStrings(omitKeys.concat(libUtil.EXCLUDE_KEYS_CONFIG)),\n        omitValues: libUtil.EXCLUDE_VALUES_CONFIG,\n        caseSensitive: keepCase,\n        useFullPath: 'false' === 'true',\n        useLastValue: 'false' === 'true',\n        customDelimited: [/./],\n        altDelimiter: ',',\n        userKeys: _.map(userAttr, function(exp) {\n            return new RegExp(\"(^|\\\\.)\" + exp + \"$\");\n        }),\n        optimizeNames: true\n    });\n\n    /* Only set Attributes in the allowed list */\n    allowedList = _.map(allAttr, function(name) {\n        return new RegExp(\"(_attr_|_attr_\" + prefix + \"|\\\\.)\" + (keepCase ?\n            name : libUtil.normalizeAttrName(name, {\n                removeDot: false\n            })) + \"$\");\n    });\n    toSet = {};\n    for (attr in attributes) {\n        if (!hasProp.call(attributes, attr)) continue;\n        value = attributes[attr];\n        if (isAllowed(attr, allowedList)) {\n            toSet[attr] = value;\n        }\n    }\n    toSet = Krux('prefix:attr', toSet, prefix);\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38442,"name":"DTC - DataLayer (kly)","content":"<script>\n(function() {\n    /* Selective Attribute DataLayer Library Tag */\n    var _, allAttr, allowedList, attr, attributes, dataLayerIngester, dataObj,\n        isAllowed, keepCase, libUtil, omitKeys, pageAttr, prefix, toSet, trim,\n        userAttr, util, value,\n        hasProp = {}.hasOwnProperty;\n    _ = Krux('require:underscore');\n    util = Krux('require:util');\n    libUtil = Krux('require:util.library-tag');\n    dataLayerIngester = Krux('require:scrape').ingestDataLayer;\n\n    /* Safe copy of dataLayer object */\n    dataObj = Krux('scrape.javascript', 'kly');\n\n    /* String trimming helper function */\n    trim = function(attr) {\n        return (\"\" + attr).replace(/^\\s+|\\s+$/g, '');\n    };\n\n    /* Attribute configs */\n    pageAttr = _.map('site,platform,isAdultContent'.split(','), trim);\n    userAttr = _.map('false'.split(','), trim);\n\n    /* Create a array of attributes striping any empty strings */\n    allAttr = _.without(pageAttr.concat(userAttr), '');\n\n    /* Configuration settings */\n    keepCase = 'false' === 'true';\n    omitKeys = 'false'.split(',');\n\n    /* Resolve Prefix */\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        '');\n\n    /* Function to varify if attribute should be used */\n    isAllowed = function(value, whitelist) {\n        var i, len, str, x;\n        str = \"\" + value;\n        if (!((value != null) && str.length > 0)) {\n            return false;\n        }\n        for (i = 0, len = whitelist.length; i < len; i++) {\n            x = whitelist[i];\n            if (value.match(x) != null) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /* Get a full list of attributes usting the dataLayer tool */\n    attributes = dataLayerIngester(dataObj, {\n        omitKeys: libUtil.removeFalsyStrings(omitKeys.concat(libUtil.EXCLUDE_KEYS_CONFIG)),\n        omitValues: libUtil.EXCLUDE_VALUES_CONFIG,\n        caseSensitive: keepCase,\n        useFullPath: 'false' === 'true',\n        useLastValue: 'false' === 'true',\n        customDelimited: [/./],\n        altDelimiter: ',',\n        userKeys: _.map(userAttr, function(exp) {\n            return new RegExp(\"(^|\\\\.)\" + exp + \"$\");\n        }),\n        optimizeNames: true\n    });\n\n    /* Only set Attributes in the allowed list */\n    allowedList = _.map(allAttr, function(name) {\n        return new RegExp(\"(_attr_|_attr_\" + prefix + \"|\\\\.)\" + (keepCase ?\n            name : libUtil.normalizeAttrName(name, {\n                removeDot: false\n            })) + \"$\");\n    });\n    toSet = {};\n    for (attr in attributes) {\n        if (!hasProp.call(attributes, attr)) continue;\n        value = attributes[attr];\n        if (isAllowed(attr, allowedList)) {\n            toSet[attr] = value;\n        }\n    }\n    toSet = Krux('prefix:attr', toSet, prefix);\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":38571,"name":"DTC - Generic (KLY)","content":"<script>\n(function() {\n    /* Generic Scrape Tag - Configurable Data Collection */\n    var _, filterValues, libUtil, prefix, scrapeConfig, toSet;\n    _ = Krux('require:underscore');\n    libUtil = Krux('require:util.library-tag');\n    toSet = {};\n    filterValues = function(val) {\n        var i, item, len, ref, str, x;\n        if (_.isArray(val)) {\n            return _.compact((function() {\n                var i, len, results;\n                results = [];\n                for (i = 0, len = val.length; i < len; i++) {\n                    item = val[i];\n                    results.push(filterValues(item));\n                }\n                return results;\n            })());\n        }\n        str = \"\" + val;\n        if (!((val != null) && str.length > 0)) {\n            return;\n        }\n        ref = libUtil.EXCLUDE_VALUES_CONFIG;\n        for (i = 0, len = ref.length; i < len; i++) {\n            x = ref[i];\n            if (str.match(x) != null) {\n                return;\n            }\n        }\n        return val;\n    };\n    scrapeConfig = function(config, type) {\n        var attr, i, len, parts, ref, results, value;\n        ref = libUtil.removeFalsyStrings(config);\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n            attr = ref[i];\n            parts = attr.split('|');\n            if (parts.length === 1 && 'js_global'.match(/(dom|javascript)/)) {\n                continue;\n            }\n            if (parts.length === 1) {\n                parts.unshift(libUtil.normalizeAttrName(parts[0]));\n            }\n            value = filterValues(Krux('scrape.js_global', parts[1]));\n            if (value) {\n                results.push(toSet[type + \"_attr_\" + parts[0]] = value);\n            } else {\n                results.push(void 0);\n            }\n        }\n        return results;\n    };\n    scrapeConfig('authors_names|kmklabs.gtm.authors.names,authors_names|kly.gtm.authors.names', 'page');\n    scrapeConfig('undefined', 'user');\n    prefix = libUtil.resolvePrefix('text', 'kly',\n        'undefined');\n    toSet = Krux('prefix:attr', toSet, prefix);\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":41518,"name":"KLY Facebook DMP segments","content":"<script>\n(function() {\n    var c = Krux;\n    function n() {\n        var e = c('require:underscore');\n        var t = \"false\" === \"true\";\n        var n = c('get', atob('dXNlcl9zZWdtZW50cw==')) || [];\n        var i = e.without('t132uuq5f:Fashion_Lovers_USS_t132uuq5f,t131yvou0:Beauty_Enthusiast_USS_t131yvou0,t131llctq:Woman_Household_USS_t131llctq,t13zhj75p:Mom_with_Kids_USS_t13zhj75p,t13thh8b8:Milenial_Adult_USS_t13thh8b8,tzl02g0bl:Beauty_BSS_tzl02g0bl,tzlz95r0n:Lifestyle-Tips_BSS_tzlz95r0n,tzlytf64c:Lifestyle-Culinary_BSS_tzlytf64c,tzh1jktow:Lifestyle-Love_BSS_tzh1jktow,tw1bejayz:Lifestyle_BSS_tw1bejayz,tw019h508:Lifestyle-Zodiak_BSS_tw019h508,twotmzome:Ticket_&_Concert_BSS_twotmzome,tsankogrh:Sport_BSS_tsankogrh,tsanbbb5e:Automotive_BSS_tsanbbb5e,tsam3knlf:Soccer_BSS_tsam3knlf,tsalg75jn:Computer_&_Electronics_BSS_tsalg75jn,tsalarj4o:Parenting_BSS_tsalarj4o,tsak3623n:Travel_&_Culinary_BSS_tsak3623n,tsais9e6x:Fashion_BSS_tsais9e6x,tsahjm7yw:Entertainment_BSS_tsahjm7yw,tsagy2m0m:Health_BSS_tsagy2m0m,tsagk5a78:News_BSS_tsagk5a78,tsafz8k0v:Finance_&_Business_BSS_tsafz8k0v,tr62t1fj2:Traveller_BSS_tr62t1fj2,tr6z15p4s:eCommerce_BSS_tr6z15p4s,tjtop60dx:KLY_users_BSS_tjtop60dx,tqi6kmk44:Male_(Factual_&_Eyeota)_DSS_tqi6kmk44,tqi6fygsx:Female_(Factual_&_Eyeota)_DSS_tqi6fygsx,udwa7oxz8:Korean_Enthusiast_BSS_udwa7oxz8,ugril3gy4:Automotive_electric_bike_ESS_ugril3gy4'.split(',').map(function(e) {\n            var t = e.split(':');\n            if (t.length == 2 && ~n.indexOf(t[0])) {\n                return t[1];\n            }\n        }), undefined);\n        if (t || i.length) {\n            !function(f,b,e,v,n,t,s)\n            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n            n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.agent='tmsalesforce';n.version='2.0';\n            n.queue=[];t=b.createElement(e);t.async=!0;\n            t.src=v;s=b.getElementsByTagName(e)[0];\n            s.parentNode.insertBefore(t,s)}(window, document,'script',\n            'https://connect.facebook.net/en_US/fbevents.js');\n            \n            //disable automatic sending meta & button click configuration\n            fbq('set', 'autoConfig', false, '2356282037950562'); \n          \n            fbq('init', '2356282037950562');\n            fbq('track', 'PageView');\n\n            var r = 0, a = i.length;\n            for (;r < a; r++) {\n                fbq('trackSingleCustom', '2356282037950562', 'KLY_DMP_'+i[r], {\n                    content_name: i[r]\n                });\n            }\n        }\n    }\n    if (c('get', 'config').params.consent_active) {\n        c('consent:get', function(e, t) {\n            if (t.settings.tg) {\n                n();\n            }\n        });\n    } else {\n        n();\n    }\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["or",["intersects","$user_segments",["t131yvou0"]],["intersects","$user_segments",["t132uuq5f"]],["intersects","$user_segments",["t13thh8b8"]],["intersects","$user_segments",["t13zhj75p"]],["intersects","$user_segments",["t131llctq"]],["intersects","$user_segments",["tsanbbb5e"]],["intersects","$user_segments",["tzl02g0bl"]],["intersects","$user_segments",["tsalg75jn"]],["intersects","$user_segments",["tr6z15p4s"]],["intersects","$user_segments",["tsahjm7yw"]],["intersects","$user_segments",["tsais9e6x"]],["intersects","$user_segments",["tqi6fygsx"]],["intersects","$user_segments",["tsafz8k0v"]],["intersects","$user_segments",["tsagy2m0m"]],["intersects","$user_segments",["tw1bejayz"]],["intersects","$user_segments",["tzlytf64c"]],["intersects","$user_segments",["tzh1jktow"]],["intersects","$user_segments",["tzlz95r0n"]],["intersects","$user_segments",["tw019h508"]],["intersects","$user_segments",["tqi6kmk44"]],["intersects","$user_segments",["tsagk5a78"]],["intersects","$user_segments",["tsalarj4o"]],["intersects","$user_segments",["tsam3knlf"]],["intersects","$user_segments",["tsankogrh"]],["intersects","$user_segments",["twotmzome"]],["intersects","$user_segments",["tsak3623n"]],["intersects","$user_segments",["tr62t1fj2"]]]]],"collects_data":true},{"id":41567,"name":"KLY GoogleAds DMP segments (custom)","content":"<!-- Google Code for Krux -->\n<!-- Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. For instructions on adding this tag and more information on the above requirements, read the setup guide: google.com/ads/remarketingsetup -->\n<!-- Global site tag (gtag.js) - Google Ads: 981037738 -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=AW-981037738\"></script>\n<script>\n    window.dataLayer = window.dataLayer || [];\n    function gtag(){dataLayer.push(arguments);}\n    gtag('js', new Date());    \n    gtag('config', 'AW-981037738');\n    \n    var krux_segments = Krux('get','user_segments') || []; //String\n    var tSegs = obSegs = segsToSend = [];\n    var allSegs = 't132uuq5f:Fashion_Lovers_USS_t132uuq5f,t131yvou0:Beauty_Enthusiast_USS_t131yvou0,t131llctq:Woman_Household_USS_t131llctq,t13zhj75p:Mom_with_Kids_USS_t13zhj75p,t13thh8b8:Milenial_Adult_USS_t13thh8b8,tzl02g0bl:Beauty_BSS_tzl02g0bl,tzlz95r0n:Lifestyle-Tips_BSS_tzlz95r0n,tzlytf64c:Lifestyle-Culinary_BSS_tzlytf64c,tzh1jktow:Lifestyle-Love_BSS_tzh1jktow,tw1bejayz:Lifestyle_BSS_tw1bejayz,tw019h508:Lifestyle-Zodiak_BSS_tw019h508,twotmzome:Ticket_&_Concert_BSS_twotmzome,tsankogrh:Sport_BSS_tsankogrh,tsanbbb5e:Automotive_BSS_tsanbbb5e,tsam3knlf:Soccer_BSS_tsam3knlf,tsalg75jn:Computer_&_Electronics_BSS_tsalg75jn,tsalarj4o:Parenting_BSS_tsalarj4o,tsak3623n:Travel_&_Culinary_BSS_tsak3623n,tsais9e6x:Fashion_BSS_tsais9e6x,tsahjm7yw:Entertainment_BSS_tsahjm7yw,tsagy2m0m:Health_BSS_tsagy2m0m,tsagk5a78:News_BSS_tsagk5a78,tsafz8k0v:Finance_&_Business_BSS_tsafz8k0v,tr62t1fj2:Traveller_BSS_tr62t1fj2,tr6z15p4s:eCommerce_BSS_tr6z15p4s,tjtop60dx:KLY_users_BSS_tjtop60dx,udwa7oxz8:Korean_Enthusiast_BSS_udwa7oxz8,ugril3gy4:Engagement_Automotive_electric_bike_ESS_ugril3gy4';    //,tqi6kmk44:Male_(Factual_&_Eyeota)_DSS_tqi6kmk44,tqi6fygsx:Female_(Factual_&_Eyeota)_DSS_tqi6fygsx';\n    var convID = {\n        't132uuq5f':'7X5ECKudlakBEKrl5dMD', //KLY – All Platforms - Fashion Lovers - USS\n        't131yvou0':'v-9zCMfIsqkBEKrl5dMD', //KLY – All Platforms - Beauty Enthusiast - USS\n        't131llctq':'ko3wCPKhqqkBEKrl5dMD', //KLY – All Platforms - Woman Household - USS\n        't13zhj75p':'7oDwCP7BpakBEKrl5dMD', //KLY – All Platforms - Mom with Kids - USS\n        't13thh8b8':'AmceCJ_HsqkBEKrl5dMD', //KLY – All Platforms - Milenial Adult - USS\n        'tzl02g0bl':'T2tqCKLHsqkBEKrl5dMD', //KLY – All Platforms - Beauty - BSS\n        'tzlz95r0n':'KrWgCOO9p6kBEKrl5dMD', //KLY – All Platforms - Lifestyle-Tips - BSS\n        'tzlytf64c':'zRpNCMrTtKkBEKrl5dMD', //KLY – All Platforms - Lifestyle-Culinary - BSS\n        'tzh1jktow':'E-t4CMrWtKkBEKrl5dMD', //KLY – All Platforms - Lifestyle-Love - BSS\n        'tw1bejayz':'cYdUCJjDp6kBEKrl5dMD', //KLY – All Platforms - Lifestyle - BSS\n        'tw019h508':'o9pSCMjGp6kBEKrl5dMD', //KLY – All Platforms - Lifestyle-Zodiak - BSS\n        'twotmzome':'31yHCPrftKkBEKrl5dMD', //KLY – All Platforms - Ticket & Concert - BSS\n        'tsankogrh':'q4KNCP3ctKkBEKrl5dMD', //KLY – All Platforms - Sport - BSS\n        'tsanbbb5e':'2-K_CJ3ZtKkBEKrl5dMD', //KLY – All Platforms - Automotive - BSS\n        'tsam3knlf':'Fvn-CJvatKkBEKrl5dMD', //KLY – All Platforms - Soccer - BSS\n        'tsalg75jn':'GP81CKXQp6kBEKrl5dMD', //KLY – All Platforms - Computer & Electronics - BSS\n        'tsalarj4o':'UCPECK7Qp6kBEKrl5dMD', //KLY – All Platforms - Parenting - BSS\n        'tsak3623n':'n0tFCP3ltKkBEKrl5dMD', //KLY – All Platforms - Travel & Culinary - BSS\n        'tsais9e6x':'CfTxCMPQp6kBEKrl5dMD', //KLY – All Platforms - Fashion - BSS\n        'tsahjm7yw':'XlwlCNPltKkBEKrl5dMD', //KLY – All Platforms - Entertainment - BSS\n        'tsagy2m0m':'1XEFCNzltKkBEKrl5dMD', //KLY – All Platforms - Health - BSS\n        'tsagk5a78':'ud-iCI-drKkBEKrl5dMD', //KLY – All Platforms - News - BSS\n        'tsafz8k0v':'UM5dCJrrtKkBEKrl5dMD', //KLY – All Platforms - Finance & Business - BSS\n        'tr62t1fj2':'m05PCPjptKkBEKrl5dMD', //KLY – All Platforms - Traveller - BSS\n        'tr6z15p4s':'YBR7CPXVp6kBEKrl5dMD', //KLY – All Platforms - eCommerce - BSS\n        'tjtop60dx':'KlpcCKzGpakBEKrl5dMD', //KLY – All Platforms - KLY users - BSS\n        'udwa7oxz8':'neGQCJWv8KkBEKrl5dMD', //KLY – All Platforms - Korean Enthusiast - BSS\n        'ugril3gy4':'DRuDCKf4q6wBEKrl5dMD', //KLY - Engagement - Automotive electric bike - ESS\n    };\n    \n    allSegs = allSegs.split(',');\n    allSegs.map(function(seg)\n\t{\n        segOb = seg.split(':');\n        if (segOb.length == 2 && ~krux_segments.indexOf(segOb[0])) \n        {\n            //console.log('key : '+segOb[0]);\n            //console.log('key : '+segOb[1]);\n            tSegs.push(segOb[0]);\n            obSegs[segOb[0]] = segOb[1];\n            \n            //Event snippet for dummy conversion test conversion page\n            gtag('event', 'conversion', {\n                'send_to': 'AW-981037738/'+convID[segOb[0]],\n                'value': 1.0,\n                'currency': 'IDR',\n                'name': segOb[1]\n            });\n          \t//console.log('trigger conversion : '+segOb[1]);\n        }\n    });  \n    \n    //console.log('Krux send to Google');\n\t//console.log(window.location);\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":false,"criteria":["and",["and",["or",["intersects","$user_segments",["t131yvou0"]],["intersects","$user_segments",["t132uuq5f"]],["intersects","$user_segments",["t13thh8b8"]],["intersects","$user_segments",["t13zhj75p"]],["intersects","$user_segments",["t131llctq"]],["intersects","$user_segments",["tsanbbb5e"]],["intersects","$user_segments",["tzl02g0bl"]],["intersects","$user_segments",["tsalg75jn"]],["intersects","$user_segments",["tr6z15p4s"]],["intersects","$user_segments",["tsahjm7yw"]],["intersects","$user_segments",["tsais9e6x"]],["intersects","$user_segments",["tqi6fygsx"]],["intersects","$user_segments",["tsafz8k0v"]],["intersects","$user_segments",["tsagy2m0m"]],["intersects","$user_segments",["tw1bejayz"]],["intersects","$user_segments",["tzlytf64c"]],["intersects","$user_segments",["tzh1jktow"]],["intersects","$user_segments",["tzlz95r0n"]],["intersects","$user_segments",["tw019h508"]],["intersects","$user_segments",["tqi6kmk44"]],["intersects","$user_segments",["tsagk5a78"]],["intersects","$user_segments",["tsalarj4o"]],["intersects","$user_segments",["tsam3knlf"]],["intersects","$user_segments",["tsankogrh"]],["intersects","$user_segments",["twotmzome"]],["intersects","$user_segments",["tsak3623n"]],["intersects","$user_segments",["tr62t1fj2"]]]]],"collects_data":true},{"id":41638,"name":"DTC - Email (sha256) KLY + Microsites","content":"<script>\n(function() {\n    /* Email ID Scraper */\n    var algorithm, id, idType, obj, toSet;\n    idType = 'email';\n    algorithm = 'sha256';\n    switch ('js_global') {\n        case 'get':\n            id = Krux('get', 'kly.gtm.email_sha256');\n            break;\n        default:\n            id = Krux('scrape.js_global', 'kly.gtm.email_sha256');\n    }\n    if (typeof id !== 'string') {\n        return;\n    }\n    if (/^.+@./.test(id)) {\n        algorithm = 'sha256';\n        id = Krux('scrape.email_sha256', id);\n    }\n    toSet = (\n        obj = {},\n        obj[\"user_attr_\" + idType + \"_\" + algorithm] = id,\n        obj\n    );\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true},{"id":41749,"name":"User_ID_salted_phone_sh256","content":"<script>\n(function() {\n    /* User ID Scraper */\n    var _, exclude, excludeArg, id, name, obj, toSet,\n        indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i <\n                l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n    _ = Krux('require:underscore');\n    switch ('js_global') {\n        case 'get':\n            id = Krux('get', 'kly.gtm.phone_sha256');\n            break;\n        default:\n            id = Krux('scrape.js_global', 'kly.gtm.phone_sha256');\n    }\n    name = 'phone_sha256';\n    exclude = 'undefined'.split(',');\n    if (_.isArray(id)) {\n        excludeArg = exclude.slice();\n        excludeArg.unshift(id);\n        id = _.without.apply(null, excludeArg)[0];\n    }\n    if (!(typeof id === 'string' || typeof id === 'number')) {\n        return;\n    }\n    if (/^.+@./.test(id)) {\n        return;\n    }\n    if (indexOf.call(exclude, id) >= 0) {\n        return;\n    }\n    toSet = (\n        obj = {},\n        obj[\"user_attr_\" + name] = id,\n        obj\n    );\n    Krux('set', toSet);\n}).call();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":null,"template_replacement":true,"internal":true,"criteria":[],"collects_data":true}],"usermatch_tags":[{"id":6,"name":"Google User Match","content":"<script>\n(function() {\n  if (Krux('get', 'user') != null) {\n      new Image().src = 'https://usermatch.krxd.net/um/v2?partner=google';\n  }\n})();\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":15,"name":"TheTradeDesk User Match","content":"<script>\r\n(function(){\r\nvar kuid = Krux('get', 'user');\r\nvar consent = Krux('iab:urlParams');\r\nif (kuid) {\r\nif(!consent){\r\nconsent = \"\";\r\n}\r\nvar p = location.protocol == 'https:' ? 'https:' : 'http:';\r\nvar purl = '//match.adsrvr.org/track/cmf/generic?ttd_pid=krux&ttd_tpi=1';\r\n(new Image()).src  = p + purl + consent; \r\n}\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":51,"name":"Eyeota User Match","content":"<script>\r\n(function(){\r\n        var kuid = Krux('get', 'user');\r\n        var prefix = window.location.protocol == 'https:' ? 'https:' : 'http:';\r\n\r\n        if (kuid) {\r\n           var url = prefix + '//ps.eyeota.net/match?bid=i0r4o4v&uid=' + kuid;\r\n           (new Image()).src = url;\r\n        }\r\n})();\r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":1,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true},{"id":154,"name":"Lotame","content":"<script>\r\n    (function() {\r\n        var url = 'https://sync.crwdcntrl.net/map/c=9164/TP=KRUX?https://beacon.krxd.net/usermatch.gif?partner=lotame&partner_uid=${profile_id}';\r\n        (new Image()).src = url;\r\n    })(); \r\n</script>","target":null,"target_action":"append","timing":"onload","method":"document","priority":2,"template_replacement":false,"internal":true,"criteria":[],"collects_data":true}],"link":{"adslots":{},"bidders":{}}};
  
  for (var i = 0, tags = config.tags, len = tags.length, tag; (tag = tags[i]); ++i) {
    if (String(tag.id) in cs) {
      tag.content = cs[tag.id];
    }
  }

  
  var esiGeo = String(function(){/*
   <esi:include src="/geoip_esi"/>
  */}).replace(/^.*\/\*[^{]+|[^}]+\*\/.*$/g, '');

  if (esiGeo) {
    log('Got a request for:', esiGeo, 'adding geo to config.');
    try {
      config.geo = w.JSON.parse(esiGeo);
    } catch (__) {
      
      log('Unable to parse geo from:', config.geo);
      config.geo = {};
    }
  }



  var proxy = (window.Krux && window.Krux.q && window.Krux.q[0] && window.Krux.q[0][0] === 'proxy');

  if (!proxy || true) {
    

  load('//cdn.krxd.net/ctjs/controltag.js.e4cdf7ad64ebac73f207c1ce55cc1727', function() {
    log('Loaded stable controltag resource');
    Krux('config', config);
  });

  }

})(window, (function() {
  var obj = {};
  
  return obj;
})());
