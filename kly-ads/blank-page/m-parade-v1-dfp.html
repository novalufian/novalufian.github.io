<style>
div#parede-close {
    position: absolute;
    width: 30px;
    height: 30px;
    right: 0;
    top: 0;
    opacity: 0;
    background: red;
    animation: closebtn 1s 16s forwards;
}

#cars-wrapper{
    position: absolute;
    bottom: 0;
    height: 120px;
    display: flex;
    animation: carmove 15s linear 3;
    animation-delay: 1.5s;
}

.car{
    height: 120px;
    margin: 0 20px;
}

@keyframes closebtn{
    0%{
        opacity: 0;
    }
    100%{
        opacity: 1;
    }
}

</style>

<div id="parede-close"></div>

<div id="cars-wrapper">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/01.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/02.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/03.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/04.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/05.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/06.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/07.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/08.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/09.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/10.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/11.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/12.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/13.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/14.png" alt="" class="car">
    <img src="https://novalufian.github.io/kly-ads/blank-page/asset/15.png" alt="" class="car">
</div>

<script>
    var _iframe = window.frameElement;
    var _btnClose = document.querySelector("#parede-close");

    _btnClose.addEventListener("click", closeParade);
    bootads();
    
    function bootads() {
        _iframe.classList.add("parade-wrapper","active");
        _insertStyleParent();
        _disableRefresh();
    }
    
    
    function _insertStyleParent() {
        var _style = document.createElement("style");
        _style.textContent = `
        .parade-wrapper{
            width: 100%;
            height: 150px;
            position: fixed;
            z-index: 1000;
            bottom: -100%;
            left : 0;
            margin: 0;
            background-image: url(https://novalufian.github.io/kly-ads/blank-page/asset/bg-mobile.png);
            background-size: contain;
        }
        
        .parade-wrapper.active{
            animation: slideup 47s forwards 1s;
        }
        
        .parade-wrapper.remove{
            animation: slidedown 1s forwards;
        }
        
        @keyframes slideup{
            0%{
                bottom: -100%;
            }
            2.127659574468085%{
                bottom: 0;
            }
            97.87234042553192%{
                bottom: 0;
            }
            100%{
                bottom: -100%;
            }
        }
        
        @keyframes slidedown{
            0%{
                bottom: 0;
            }
            100%{
                bottom: -100%;
            }
        }
        `;
        _iframe.parentElement.appendChild(_style);
        
    }


    function closeParade() {
        _iframe.classList.add("remove")
    }

    setTimeout(function(){
        var _carsWrapper = document.getElementById("cars-wrapper");
        var _cars = document.querySelectorAll("#cars-wrapper .car");
        console.log(_carsWrapper.clientWidth);
        var _style = document.createElement("style");
        var _s = `
        #cars-wrapper{
            left: -${165 * _cars.length }px;
        }
        @keyframes carmove{
            0%{
                left: -${165 * _cars.length }px;
            }
            100%{
                left: 100%;
            }
        }
        `;
        _style.textContent = _s;
        console.log(_carsWrapper.clientWidth);
        document.body.appendChild(_style);
    }, 500);

    function _disableRefresh() {
        var _x = setInterval(() => {
            if(typeof parent.GAMLibrary == "object"){
                parent.GAMLibrary.setGamBFInterval(false);
            }
        }, 100);
    }
    
    //%%CLICK_URL_UNESC%%%%CLICK_URL_ESC%%%%VIEW_URL_UNESC%%
    
</script>
